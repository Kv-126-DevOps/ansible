---
- name: Check that Passwords Variables are set correctly
  ansible.builtin.assert:
    that:
      - "{{ item is defined }}"
      - "{{ item is string }}"
      - "{{ item | length > 0 }}"
    quiet: true
  loop:
    - "{{ postgre_pw }}"
    - "{{ rabbit_pw }}"
#  no_log: true
  tags:
    - rabbit_to_db_install

- name: Check that String Variables are set correctly
  ansible.builtin.assert:
    that:
      - "{{ item is defined }}"
      - "{{ item is string }}"
      - "{{ item | length > 0 }}"
    quiet: true
  loop:
    - "{{ env_class }}"
    - "{{ env_name }}"
    - "{{ env_region }}"
    - "{{ env_qm_connection }}"
    - "{{ postgre_host }}"
    - "{{ postgre_usr }}"
    - "{{ postgre_db }}"
    - "{{ rabbit_host }}"
    - "{{ rabbit_usr }}"
    - "{{ rabbit_queue }}"
    - "{{ rabbit_to_db_git_branch }}"
    - "{{ rabbit_to_db_workdir }}"
  tags:
    - rabbit_to_db_install

- name: Check that Integer Variables are set correctly
  ansible.builtin.assert:
    that:
      - "{{ item is defined }}"
      - "{{ item is number }}"
    quiet: true
  loop:
    - "{{ postgre_port }}"
    - "{{ rabbit_port }}"
  tags:
    - rabbit_to_db_install
